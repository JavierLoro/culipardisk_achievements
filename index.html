<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Club Deportivo Culipardisk</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="container">
        <h1>üèÜ CULIPARDISK</h1>
        <p class="subtitle">Temporada 2025-2026</p>

        <div id="stats" class="stats"></div>

        <div class="achievements-container">
            <div id="playersList" class="players-list">
                <!-- Se generar√° din√°micamente -->
            </div>
        </div>

        <div id="loading" class="loading">Cargando logros...</div>
        <div id="error" class="error" style="display: none;"></div>
    </div>

    <script>
        // Simulaci√≥n del archivo logros.json para demostraci√≥n
        // En producci√≥n, esto se cargar√° desde un archivo JSON externo
        const logrosData = {
            "logros": [
                {
                    "id": "goleador",
                    "nombre": "Goleador",
                    "tipo": "publico",
                    "imagenBloqueada": "https://via.placeholder.com/100/cccccc/666666?text=üîí",
                    "imagenDesbloqueada": "https://via.placeholder.com/100/FFD700/FFFFFF?text=‚öΩ",
                    "descripcion": "Marca 10 goles en la temporada"
                },
                {
                    "id": "asistente",
                    "nombre": "Asistente Estrella",
                    "tipo": "publico",
                    "imagenBloqueada": "https://via.placeholder.com/100/cccccc/666666?text=üîí",
                    "imagenDesbloqueada": "https://via.placeholder.com/100/4169E1/FFFFFF?text=ü§ù",
                    "descripcion": "Realiza 5 asistencias"
                },
                {
                    "id": "mvp",
                    "nombre": "MVP del Mes",
                    "tipo": "publico",
                    "imagenBloqueada": "https://via.placeholder.com/100/cccccc/666666?text=üîí",
                    "imagenDesbloqueada": "https://via.placeholder.com/100/FF1493/FFFFFF?text=‚≠ê",
                    "descripcion": "Mejor jugador del mes"
                },
                {
                    "id": "invicto",
                    "nombre": "Muro Invencible",
                    "tipo": "publico",
                    "imagenBloqueada": "https://via.placeholder.com/100/cccccc/666666?text=üîí",
                    "imagenDesbloqueada": "https://via.placeholder.com/100/32CD32/FFFFFF?text=üõ°Ô∏è",
                    "descripcion": "Portero con 5 partidos sin recibir goles"
                },
                {
                    "id": "veterano",
                    "nombre": "???",
                    "tipo": "secreto",
                    "imagenBloqueada": "https://via.placeholder.com/100/444444/222222?text=‚ùì",
                    "imagenDesbloqueada": "https://via.placeholder.com/100/8B4513/FFFFFF?text=üéñÔ∏è",
                    "descripcion": "100 partidos con el club"
                },
                {
                    "id": "leyenda",
                    "nombre": "???",
                    "tipo": "secreto",
                    "imagenBloqueada": "https://via.placeholder.com/100/444444/222222?text=‚ùì",
                    "imagenDesbloqueada": "https://via.placeholder.com/100/9400D3/FFFFFF?text=üëë",
                    "descripcion": "Capit√°n durante 3 temporadas consecutivas"
                },
                {
                    "id": "comeback",
                    "nombre": "???",
                    "tipo": "secreto",
                    "imagenBloqueada": "https://via.placeholder.com/100/444444/222222?text=‚ùì",
                    "imagenDesbloqueada": "https://via.placeholder.com/100/FF4500/FFFFFF?text=üî•",
                    "descripcion": "Marca 3 goles en una remontada √©pica"
                },
                {
                    "id": "fairplay",
                    "nombre": "Fair Play",
                    "tipo": "publico",
                    "imagenBloqueada": "https://via.placeholder.com/100/cccccc/666666?text=üîí",
                    "imagenDesbloqueada": "https://via.placeholder.com/100/00CED1/FFFFFF?text=ü§ç",
                    "descripcion": "Temporada sin tarjetas rojas"
                }
            ],
            "jugadores": [
                {
                    "nombre": "Carlos Rodr√≠guez",
                    "logrosDesbloqueados": ["goleador", "mvp", "veterano"]
                },
                {
                    "nombre": "Miguel √Ångel Torres",
                    "logrosDesbloqueados": ["asistente", "fairplay"]
                },
                {
                    "nombre": "Javier Hern√°ndez",
                    "logrosDesbloqueados": ["goleador", "asistente", "mvp", "comeback"]
                },
                {
                    "nombre": "Diego Mart√≠nez",
                    "logrosDesbloqueados": ["invicto", "fairplay", "veterano"]
                },
                {
                    "nombre": "Roberto Silva",
                    "logrosDesbloqueados": ["leyenda", "veterano", "fairplay", "mvp"]
                }
            ]
        };

        class AchievementSystem {
            constructor() {
                this.data = null;
                this.init();
            }

            async init() {
                try {
                    // IMPORTANTE: Para pruebas locales, usar los datos simulados
                    //this.data = logrosData;

                    // Para producci√≥n con archivo JSON externo, descomentar estas l√≠neas:
                    const response = await fetch('logros.json');
                    this.data = await response.json();

                    this.render();
                    this.hideLoading();
                    this.renderStats();
                } catch (error) {
                    this.showError('Error al cargar los datos: ' + error.message);
                }
            }

            render() {
                const playersList = document.getElementById('playersList');
                let html = '';

                // Crear una copia de jugadores y ordenar por cantidad de logros (mayor a menor)
                const jugadoresOrdenados = [...this.data.jugadores].sort((a, b) => {
                    return b.logrosDesbloqueados.length - a.logrosDesbloqueados.length;
                });

                jugadoresOrdenados.forEach((jugador, index) => {
                    const animationDelay = index * 0.1;
                    const isLeader = index === 0 && jugador.logrosDesbloqueados.length > 0;
                    const position = index + 1;

                    html += `
                        <div class="player-card ${isLeader ? 'leader' : ''}" style="animation-delay: ${animationDelay}s">
                            <div class="player-header">
                                <div class="player-info">
                                    
                                    <h3 class="player-name">${jugador.nombre}</h3>
                                    
                                </div>
                                <span class="achievement-count">${jugador.logrosDesbloqueados.length}/${this.data.logros.length}</span>
                            </div>
                            <div class="achievements-grid">
                                ${this.renderPlayerAchievements(jugador)}
                            </div>
                        </div>
                    `;
                });

                playersList.innerHTML = html;
            }

            renderPlayerAchievements(jugador) {
                let achievementsHTML = '';

                this.data.logros.forEach(logro => {
                    const isUnlocked = jugador.logrosDesbloqueados.includes(logro.id);
                    achievementsHTML += this.renderAchievement(logro, isUnlocked);
                });

                return achievementsHTML;
            }

            renderAchievement(logro, isUnlocked) {
                let imgSrc, tooltipText, imgClass;

                if (isUnlocked) {
                    imgSrc = logro.imagenDesbloqueada;
                    // Para logros desbloqueados, mostrar nombre + descripci√≥n
                    const nombreMostrar = logro.tipo === 'secreto' ?
                        logro.descripcion.split(' ')[0] + '...' : // Toma primera palabra de la descripci√≥n para secretos
                        logro.nombre;
                    tooltipText = `<strong>${nombreMostrar}</strong><br>${logro.descripcion}`;
                    imgClass = 'achievement-img unlocked';
                } else {
                    imgSrc = logro.imagenBloqueada;
                    if (logro.tipo === 'secreto') {
                        tooltipText = '<strong>???</strong><br>Secreto';
                    } else {
                        tooltipText = `<strong>${logro.nombre}</strong><br>Bloqueado`;
                    }
                    imgClass = logro.tipo === 'secreto' ? 'achievement-img secret-locked' : 'achievement-img locked';
                }

                return `
        <div class="achievement-cell">
            <img src="${imgSrc}" alt="${logro.nombre}" class="${imgClass}">
            <div class="tooltip">${tooltipText}</div>
        </div>
    `;
            }

            renderStats() {
                const statsDiv = document.getElementById('stats');

                const totalLogros = this.data.logros.length;
                const totalJugadores = this.data.jugadores.length;
                let totalDesbloqueados = 0;
                let jugadorMasLogros = '';
                let maxLogros = 0;

                // Calcular logros secretos desbloqueados
                let secretosDesbloqueados = 0;
                const totalSecretos = this.data.logros.filter(l => l.tipo === 'secreto').length;

                this.data.jugadores.forEach(jugador => {
                    const count = jugador.logrosDesbloqueados.length;
                    totalDesbloqueados += count;

                    // Contar secretos desbloqueados
                    jugador.logrosDesbloqueados.forEach(logroId => {
                        const logro = this.data.logros.find(l => l.id === logroId);
                        if (logro && logro.tipo === 'secreto') {
                            secretosDesbloqueados++;
                        }
                    });

                    if (count > maxLogros) {
                        maxLogros = count;
                        jugadorMasLogros = jugador.nombre;
                    }
                });

                const porcentajeCompletado = Math.round((totalDesbloqueados / (totalLogros * totalJugadores)) * 100);

                statsDiv.innerHTML = `
                    <div class="stat-card fade-in">
                        <div class="stat-number">${totalJugadores}</div>
                        <div class="stat-label">Jugadores</div>
                    </div>
                    <div class="stat-card fade-in" style="animation-delay: 0.1s;">
                        <div class="stat-number">${totalLogros}</div>
                        <div class="stat-label">Logros Disponibles</div>
                    </div>
                    <div class="stat-card fade-in" style="animation-delay: 0.2s;">
                        <div class="stat-number">${porcentajeCompletado}%</div>
                        <div class="stat-label">Completado Global</div>
                    </div>
                    <div class="stat-card fade-in" style="animation-delay: 0.3s;">
                        <div class="stat-number">${secretosDesbloqueados}/${totalSecretos}</div>
                        <div class="stat-label">Secretos Revelados</div>
                    </div>
                `;
            }

            hideLoading() {
                document.getElementById('loading').style.display = 'none';
            }

            showError(message) {
                document.getElementById('loading').style.display = 'none';
                const errorDiv = document.getElementById('error');
                errorDiv.textContent = message;
                errorDiv.style.display = 'block';
            }
        }

        // Inicializar el sistema cuando se carga la p√°gina
        document.addEventListener('DOMContentLoaded', () => {
            new AchievementSystem();
        });
    </script>
</body>

</html>